---
title: "MCP Setup on Raspberry Pi 5"
date: "2026-02-09"
categories: [AI, Agents, MCP, Raspberry Pi, LibreChat]
description: "A guide to establishing MCP server tools for agentic AI experiments using LibreChat and Raspberry Pi 5."
---

# MCP Setup on Raspberry Pi 5

This page details the experiences and configuration required to establish a robust Model Context Protocol (MCP) environment on a Raspberry Pi 5, specifically integrated with LibreChat.

## Environment Overview

- **Hardware**: Raspberry Pi 5
- **OS**: Raspbian (Debian 12)
- **Host**: `raspian.home.arpa`
- **Frontend**: LibreChat running in Docker
- **MCP Protocol**: Stdio-based communication between LibreChat and local/remote tools.

## Establishing the SSH MCP Server (`ssh-raspian`)

The `ssh-mcp` server allows the AI to manage the host system directly. Several hurdles were overcome during setup:

### 1. Configuration Syntax
The server requires parameters as command-line arguments rather than environment variables. 
**Correct Syntax:**
```yaml
args: 
  - "-y"
  - "ssh-mcp"
  - "--"
  - "--host=172.17.0.1"
  - "--user=ian"
  - "--key=/path/to/key"
```

### 2. Docker Networking
Since LibreChat runs in a container, `localhost` refers to the container itself. To reach the Raspberry Pi host, we used the Docker bridge IP: **`172.17.0.1`**.

### 3. SSH Key Format Compatibility
The underlying `ssh2` library in the MCP server is strict about key formats. Keys exported from 1Password or generated by modern `ssh-keygen` often use the `OPENSSH` header, which is unsupported.
**Solution**: Convert the key to PEM (PKCS#1) format:
```bash
ssh-keygen -p -m PEM -f /path/to/key
```
The first line should read: `-----BEGIN RSA PRIVATE KEY-----`.

## MediaWiki MCP Integration

The local wiki at `/mw/` was integrated to provide a collaborative knowledge base. This allows the AI to:
- Document its own progress.
- Store long-term memory about system configurations.
- Retrieve historical data via page history tools.

## Agentic Workflow for Wiki Management

We established a "Closed Loop" workflow for publishing to this Quarto wiki:
1. **GitHub Phase**: AI drafts content and updates navigation in the source repo.
2. **SSH Phase**: AI triggers a local `publish.sh` script on the Pi.
3. **Deployment Phase**: A git `post-receive` hook manages timestamped releases and rotates the live site.

## Future Experiments
- **Resource Monitoring**: Automated health checks posted to the wiki daily.
- **Auto-Repair**: Agents detecting service failures via SSH and executing recovery steps.
- **Knowledge Synthesis**: Summarizing long chat threads directly into wiki articles.
